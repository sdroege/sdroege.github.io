<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `BaseSrc` struct in crate `gstreamer_base`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, BaseSrc">

    <title>gstreamer_base::BaseSrc - Rust</title>

    <link rel="stylesheet" type="text/css" href="../normalize.css">
    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct BaseSrc</p><div class="block items"><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Clone">Clone</a><a href="#impl-Debug">Debug</a><a href="#impl-Hash">Hash</a><a href="#impl-StaticType">StaticType</a><a href="#impl-PartialEq%3CT%3E">PartialEq&lt;T&gt;</a><a href="#impl-Eq">Eq</a><a href="#impl-IsA%3CElement%3E">IsA&lt;Element&gt;</a><a href="#impl-IsA%3CObject%3E">IsA&lt;Object&gt;</a><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a><a href="#impl-IsA%3CBaseSrc%3E">IsA&lt;BaseSrc&gt;</a></div></div><p class='location'><a href='index.html'>gstreamer_base</a></p><script>window.sidebarCurrent = {name: 'BaseSrc', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='index.html'>gstreamer_base</a>::<wbr><a class="struct" href=''>BaseSrc</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span></span></h1>
<pre class='rust struct'>pub struct BaseSrc(_, _);</pre><div class='docblock'><p>This is a generic base class for source elements. The following
types of sources are supported:</p>

<ul>
<li>random access sources like files</li>
<li>seekable sources</li>
<li>live sources</li>
</ul>

<p>The source can be configured to operate in any <code>gst::Format</code> with the
<code>BaseSrcExt::set_format</code> method. The currently set format determines
the format of the internal <code>gst::Segment</code> and any <code>gst::EventType::Segment</code>
events. The default format for <code>BaseSrc</code> is <code>gst::Format::Bytes</code>.</p>

<p><code>BaseSrc</code> always supports push mode scheduling. If the following
conditions are met, it also supports pull mode scheduling:</p>

<ul>
<li>The format is set to <code>gst::Format::Bytes</code> (default).</li>
<li><code>BaseSrcClass.is_seekable</code>() returns <code>true</code>.</li>
</ul>

<p>If all the conditions are met for operating in pull mode, <code>BaseSrc</code> is
automatically seekable in push mode as well. The following conditions must
be met to make the element seekable in push mode when the format is not
<code>gst::Format::Bytes</code>:</p>

<ul>
<li><code>BaseSrcClass.is_seekable</code>() returns <code>true</code>.</li>
<li><code>BaseSrcClass.query</code>() can convert all supported seek formats to the
internal format as set with <code>BaseSrcExt::set_format</code>.</li>
<li><code>BaseSrcClass.do_seek</code>() is implemented, performs the seek and returns
<code>true</code>.</li>
</ul>

<p>When the element does not meet the requirements to operate in pull mode, the
offset and length in the <code>BaseSrcClass.create</code>() method should be ignored.
It is recommended to subclass <code>PushSrc</code> instead, in this situation. If the
element can operate in pull mode but only with specific offsets and
lengths, it is allowed to generate an error when the wrong values are passed
to the <code>BaseSrcClass.create</code>() function.</p>

<p><code>BaseSrc</code> has support for live sources. Live sources are sources that when
paused discard data, such as audio or video capture devices. A typical live
source also produces data at a fixed rate and thus provides a clock to publish
this rate.
Use <code>BaseSrcExt::set_live</code> to activate the live source mode.</p>

<p>A live source does not produce data in the PAUSED state. This means that the
<code>BaseSrcClass.create</code>() method will not be called in PAUSED but only in
PLAYING. To signal the pipeline that the element will not produce data, the
return value from the READY to PAUSED state will be
<code>gst::StateChangeReturn::NoPreroll</code>.</p>

<p>A typical live source will timestamp the buffers it creates with the
current running time of the pipeline. This is one reason why a live source
can only produce data in the PLAYING state, when the clock is actually
distributed and running.</p>

<p>Live sources that synchronize and block on the clock (an audio source, for
example) can use <code>BaseSrcExt::wait_playing</code> when the
<code>BaseSrcClass.create</code>() function was interrupted by a state change to
PAUSED.</p>

<p>The <code>BaseSrcClass.get_times</code>() method can be used to implement pseudo-live
sources. It only makes sense to implement the <code>BaseSrcClass.get_times</code>()
function if the source is a live source. The <code>BaseSrcClass.get_times</code>()
function should return timestamps starting from 0, as if it were a non-live
source. The base class will make sure that the timestamps are transformed
into the current running_time. The base source will then wait for the
calculated running_time before pushing out the buffer.</p>

<p>For live sources, the base class will by default report a latency of 0.
For pseudo live sources, the base class will by default measure the difference
between the first buffer timestamp and the start time of get_times and will
report this value as the latency.
Subclasses should override the query function when this behaviour is not
acceptable.</p>

<p>There is only support in <code>BaseSrc</code> for exactly one source pad, which
should be named &quot;src&quot;. A source implementation (subclass of <code>BaseSrc</code>)
should install a pad template in its class_init function, like so:</p>

<pre><code class="language-C">static void
my_element_class_init (GstMyElementClass *klass)
{
  GstElementClass *gstelement_class = GST_ELEMENT_CLASS (klass);
  // srctemplate should be a #GstStaticPadTemplate with direction
  // %GST_PAD_SRC and name &quot;src&quot;
  gst_element_class_add_static_pad_template (gstelement_class, &amp;amp;srctemplate);

  gst_element_class_set_static_metadata (gstelement_class,
     &quot;Source name&quot;,
     &quot;Source&quot;,
     &quot;My Source element&quot;,
     &quot;The author &lt;my.sink@my.email&gt;&quot;);
}
</code></pre>

<h2 id='controlled-shutdown-of-live-sources-in-applications' class='section-header'><a href='#controlled-shutdown-of-live-sources-in-applications'>Controlled shutdown of live sources in applications</a></h2>
<p>Applications that record from a live source may want to stop recording
in a controlled way, so that the recording is stopped, but the data
already in the pipeline is processed to the end (remember that many live
sources would go on recording forever otherwise). For that to happen the
application needs to make the source stop recording and send an EOS
event down the pipeline. The application would then wait for an
EOS message posted on the pipeline&#39;s bus to know when all data has
been processed and the pipeline can safely be stopped.</p>

<p>An application may send an EOS event to a source element to make it
perform the EOS logic (send EOS event downstream or post a
<code>gst::MessageType::SegmentDone</code> on the bus). This can typically be done
with the <code>gst::ElementExt::send_event</code> function on the element or its parent bin.</p>

<p>After the EOS has been sent to the element, the application should wait for
an EOS message to be posted on the pipeline&#39;s bus. Once this EOS message is
received, it may safely shut down the entire pipeline.</p>

<h1 id='implements' class='section-header'><a href='#implements'>Implements</a></h1>
<p><a href="trait.BaseSrcExt.html"><code>BaseSrcExt</code></a>, <a href="trait.ElementExt.html"><code>ElementExt</code></a>, <a href="trait.ObjectExt.html"><code>ObjectExt</code></a>, <a href="trait.ObjectExt.html"><code>ObjectExt</code></a></p>
</div>
            <h2 id='implementations' class='small-section-header'>
              Trait Implementations<a href='#implementations' class='anchor'></a>
            </h2>
        <h3 id='impl-Clone' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Clone' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'><h4 id='method.clone' class="method"><span id='clone.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone' class='fnname'>clone</a>(&amp;self) -&gt; <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code></span></h4>
<div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div><h4 id='method.clone_from' class="method"><span id='clone_from.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from' class='fnname'>clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Self)</code></span><span class='out-of-band'><div class='ghost'></div><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/clone.rs.html#112-114' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></div><h3 id='impl-Debug' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Debug' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'><h4 id='method.fmt' class="method"><span id='fmt.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code></span></h4>
<div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div><h3 id='impl-Hash' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html" title="trait core::hash::Hash">Hash</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Hash' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'><h4 id='method.hash' class="method"><span id='hash.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html#tymethod.hash' class='fnname'>hash</a>&lt;__H:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hasher.html" title="trait core::hash::Hasher">Hasher</a>&gt;(&amp;self, __arg_0: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>__H)</code></span></h4>
<div class='docblock'><p>Feeds this value into the given [<code>Hasher</code>]. <a href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html#tymethod.hash">Read more</a></p>
</div><h4 id='method.hash_slice' class="method"><span id='hash_slice.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html#method.hash_slice' class='fnname'>hash_slice</a>&lt;H&gt;(data: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[Self]</a>, state: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>H) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H: <a class="trait" href="https://doc.rust-lang.org/nightly/core/hash/trait.Hasher.html" title="trait core::hash::Hasher">Hasher</a>,&nbsp;</span></code></span><span class='out-of-band'><div class='ghost'></div><div class='since' title='Stable since Rust version 1.3.0'>1.3.0</div><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/hash/mod.rs.html#202-208' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Feeds a slice of this type into the given [<code>Hasher</code>]. <a href="https://doc.rust-lang.org/nightly/core/hash/trait.Hash.html#method.hash_slice">Read more</a></p>
</div></div><h3 id='impl-StaticType' class='impl'><span class='in-band'><code>impl <a class="trait" href="../gstreamer_base/trait.StaticType.html" title="trait gstreamer_base::StaticType">StaticType</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-StaticType' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'><h4 id='method.static_type' class="method"><span id='static_type.v' class='invisible'><code>fn <a href='../gstreamer_base/trait.StaticType.html#tymethod.static_type' class='fnname'>static_type</a>() -&gt; <a class="enum" href="../gstreamer_base/enum.Type.html" title="enum gstreamer_base::Type">Type</a></code></span></h4>
<div class='docblock'><p>Returns the type identifier of <code>Self</code>.</p>
</div></div><h3 id='impl-PartialEq%3CT%3E' class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="../gstreamer_base/trait.IsA.html" title="trait gstreamer_base::IsA">IsA</a>&lt;<a class="struct" href="../glib/object/struct.Object.html" title="struct glib::object::Object">Object</a>&gt;&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html" title="trait core::cmp::PartialEq">PartialEq</a>&lt;T&gt; for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-PartialEq%3CT%3E' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'><h4 id='method.eq' class="method"><span id='eq.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html#tymethod.eq' class='fnname'>eq</a>(&amp;self, other: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span></h4>
<div class='docblock'><p>This method tests for <code>self</code> and <code>other</code> values to be equal, and is used by <code>==</code>. <a href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html#tymethod.eq">Read more</a></p>
</div><h4 id='method.ne' class="method"><span id='ne.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html#method.ne' class='fnname'>ne</a>(&amp;self, other: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>Rhs) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><span class='out-of-band'><div class='ghost'></div><div class='since' title='Stable since Rust version 1.0.0'>1.0.0</div><a class='srclink' href='https://doc.rust-lang.org/nightly/src/core/cmp.rs.html#121' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>This method tests for <code>!=</code>.</p>
</div></div><h3 id='impl-Eq' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Eq.html" title="trait core::cmp::Eq">Eq</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Eq' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'></div><h3 id='impl-IsA%3CElement%3E' class='impl'><span class='in-band'><code>impl <a class="trait" href="../gstreamer_base/trait.IsA.html" title="trait gstreamer_base::IsA">IsA</a>&lt;<a class="struct" href="../gstreamer/auto/element/struct.Element.html" title="struct gstreamer::auto::element::Element">Element</a>&gt; for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-IsA%3CElement%3E' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'></div><h3 id='impl-IsA%3CObject%3E' class='impl'><span class='in-band'><code>impl <a class="trait" href="../gstreamer_base/trait.IsA.html" title="trait gstreamer_base::IsA">IsA</a>&lt;<a class="struct" href="../gstreamer/auto/object/struct.Object.html" title="struct gstreamer::auto::object::Object">Object</a>&gt; for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-IsA%3CObject%3E' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'></div><h3 id='impl-IsA%3CObject%3E-1' class='impl'><span class='in-band'><code>impl <a class="trait" href="../gstreamer_base/trait.IsA.html" title="trait gstreamer_base::IsA">IsA</a>&lt;<a class="struct" href="../glib/object/struct.Object.html" title="struct glib::object::Object">Object</a>&gt; for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-IsA%3CObject%3E-1' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'></div><h3 id='impl-Send' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Send' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/gstreamer_base/auto/base_src.rs.html#149' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'></div><h3 id='impl-Sync' class='impl'><span class='in-band'><code>impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a></code><a href='#impl-Sync' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../src/gstreamer_base/auto/base_src.rs.html#150' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'></div><h3 id='impl-IsA%3CBaseSrc%3E' class='impl'><span class='in-band'><code>impl <a class="trait" href="../gstreamer_base/trait.IsA.html" title="trait gstreamer_base::IsA">IsA</a>&lt;<a class="struct" href="../gstreamer_base/struct.BaseSrc.html" title="struct gstreamer_base::BaseSrc">BaseSrc</a>&gt; for <a class="struct" href="../gstreamer_base/struct.PushSrc.html" title="struct gstreamer_base::PushSrc">PushSrc</a></code><a href='#impl-IsA%3CBaseSrc%3E' class='anchor'></a></span><span class='out-of-band'></span></h3>
<div class='impl-items'></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "gstreamer_base";
    </script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>